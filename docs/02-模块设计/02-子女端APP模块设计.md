# é“¶é¾„å®ˆå€™Â·åŒæ¨¡äº¤äº’ç‰ˆ - å­å¥³ç«¯APPæ¨¡å—è®¾è®¡

> æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0  
> æ›´æ–°æ—¥æœŸï¼š2025å¹´12æœˆ21æ—¥  
> æ–‡æ¡£çŠ¶æ€ï¼šå·²å®Œæˆ

---

## ç›®å½•

- [1. æ¨¡å—æ¦‚è¿°](#1-æ¨¡å—æ¦‚è¿°)
- [2. åŠŸèƒ½æ¨¡å—åˆ’åˆ†](#2-åŠŸèƒ½æ¨¡å—åˆ’åˆ†)
- [3. è¿œç¨‹å…³æ€€ä¸­å¿ƒ](#3-è¿œç¨‹å…³æ€€ä¸­å¿ƒ)
- [4. å¥åº·ç®¡ç†æ¨¡å—](#4-å¥åº·ç®¡ç†æ¨¡å—)
- [5. å®‰å…¨é˜²æŠ¤æ¨¡å—](#5-å®‰å…¨é˜²æŠ¤æ¨¡å—)
- [6. äº²æƒ…äº’åŠ¨æ¨¡å—](#6-äº²æƒ…äº’åŠ¨æ¨¡å—)
- [7. æŠ€æœ¯å®ç°æ–¹æ¡ˆ](#7-æŠ€æœ¯å®ç°æ–¹æ¡ˆ)

---

## 1. æ¨¡å—æ¦‚è¿°

### 1.1 å®šä½ä¸ç›®æ ‡
å­å¥³ç«¯APPæ˜¯é¢å‘30-55å²ç”¨æˆ·çš„è¿œç¨‹å…³æ€€ç®¡ç†å¹³å°ï¼Œè®©å­å¥³èƒ½å¤Ÿï¼š
- **è¿œç¨‹äº†è§£**ï¼šå®æ—¶æŒæ¡çˆ¶æ¯çš„å¥åº·çŠ¶æ€ä¸å®‰å…¨æƒ…å†µ
- **è¿œç¨‹ç®¡ç†**ï¼šè®¾ç½®æé†’ã€é…ç½®è”ç³»äººã€ç®¡ç†æƒé™
- **è¿œç¨‹äº’åŠ¨**ï¼šå‘é€è¯­éŸ³ç•™è¨€ã€è§†é¢‘é€šè¯ã€æƒ…æ„Ÿå…³æ€€

### 1.2 è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ |
|:----|:----|
| **ä¿¡æ¯å¯†åº¦é€‚ä¸­** | å…³é”®ä¿¡æ¯çªå‡ºï¼Œé¿å…ä¿¡æ¯è¿‡è½½ |
| **æ“ä½œä¾¿æ·** | å¸¸ç”¨åŠŸèƒ½å¿«é€Ÿè§¦è¾¾ï¼Œå‡å°‘æ“ä½œæ­¥éª¤ |
| **å®æ—¶åŒæ­¥** | çŠ¶æ€å˜åŒ–å®æ—¶æ¨é€ï¼ŒæŒæ¡æœ€æ–°åŠ¨æ€ |
| **éšç§å°Šé‡** | æ˜ç¡®æ•°æ®ä½¿ç”¨èŒƒå›´ï¼Œå°Šé‡è€äººéšç§ |

### 1.3 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å­å¥³ç«¯APPæ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¡¨ç°å±‚ (Flutter UI)                                        â”‚
â”‚  â”œâ”€â”€ é¦–é¡µ (DashboardScreen)                                 â”‚
â”‚  â”œâ”€â”€ å¥åº·ç®¡ç† (HealthScreen)                                â”‚
â”‚  â”œâ”€â”€ å®‰å…¨ä¸­å¿ƒ (SecurityScreen)                              â”‚
â”‚  â”œâ”€â”€ äº²æƒ…äº’åŠ¨ (InteractionScreen)                           â”‚
â”‚  â””â”€â”€ è®¾ç½® (SettingsScreen)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸šåŠ¡é€»è¾‘å±‚ (Riverpod Providers)                             â”‚
â”‚  â”œâ”€â”€ çŠ¶æ€ç®¡ç† (StateNotifier)                               â”‚
â”‚  â””â”€â”€ ä¸šåŠ¡ç”¨ä¾‹ (Services)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å±‚ (Repository)                                        â”‚
â”‚  â”œâ”€â”€ ç½‘ç»œè¯·æ±‚ (Dio)                                         â”‚
â”‚  â”œâ”€â”€ æœ¬åœ°å­˜å‚¨ (Hive/SharedPreferences)                      â”‚
â”‚  â””â”€â”€ æ¨é€æœåŠ¡ (Firebase/æå…‰)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. åŠŸèƒ½æ¨¡å—åˆ’åˆ†

### 2.1 æ¨¡å—å…¨æ™¯å›¾

```
å­å¥³ç«¯APP
â”œâ”€â”€ é¦–é¡µæ¨¡å— (dashboard)
â”‚   â”œâ”€â”€ å®¶åº­çŠ¶æ€å¡ç‰‡
â”‚   â”œâ”€â”€ å¿«æ·æ“ä½œå…¥å£
â”‚   â””â”€â”€ æ¶ˆæ¯æé†’ä¸­å¿ƒ
â”œâ”€â”€ å¥åº·ç®¡ç†æ¨¡å— (health)
â”‚   â”œâ”€â”€ ç”¨è¯ç®¡ç†
â”‚   â”œâ”€â”€ å¥åº·æ•°æ®
â”‚   â””â”€â”€ å¥åº·æŠ¥å‘Š
â”œâ”€â”€ å®‰å…¨é˜²æŠ¤æ¨¡å— (security)
â”‚   â”œâ”€â”€ å®‰å…¨äº‹ä»¶
â”‚   â”œâ”€â”€ è¯ˆéª—é¢„è­¦
â”‚   â””â”€â”€ ä½ç½®æœåŠ¡
â”œâ”€â”€ äº²æƒ…äº’åŠ¨æ¨¡å— (interaction)
â”‚   â”œâ”€â”€ è¯­éŸ³ç•™è¨€
â”‚   â”œâ”€â”€ è§†é¢‘é€šè¯
â”‚   â””â”€â”€ å®¶åº­ç›¸å†Œ
â”œâ”€â”€ è®¾ç½®æ¨¡å— (settings)
â”‚   â”œâ”€â”€ å®¶åº­ç®¡ç†
â”‚   â”œâ”€â”€ è”ç³»äººé…ç½®
â”‚   â”œâ”€â”€ æé†’è®¾ç½®
â”‚   â””â”€â”€ è´¦å·è®¾ç½®
â””â”€â”€ åŸºç¡€æ¨¡å— (core)
    â”œâ”€â”€ ç½‘ç»œé€šä¿¡
    â”œâ”€â”€ æ¨é€æœåŠ¡
    â””â”€â”€ ç™»å½•è®¤è¯
```

### 2.2 åº•éƒ¨å¯¼èˆªè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚             [é¡µé¢å†…å®¹åŒºåŸŸ]               â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ       â¤ï¸       ğŸ›¡ï¸       ğŸ’¬      âš™ï¸  â”‚
â”‚  é¦–é¡µ    å¥åº·     å®‰å…¨     äº’åŠ¨    è®¾ç½®  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. è¿œç¨‹å…³æ€€ä¸­å¿ƒ

### 3.1 é¦–é¡µè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é“¶é¾„å®ˆå€™                     ğŸ”” æ¶ˆæ¯   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  çˆ¸çˆ¸çš„çŠ¶æ€                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  åœ¨çº¿ä¸­ Â· ä¸Šæ¬¡æ´»è·ƒ 10åˆ†é’Ÿå‰ â”‚
â”‚  â”‚  â”‚ ğŸ‘´  â”‚                         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜  ä»Šæ—¥ç”¨è¯: 2/3 âœ“        â”‚   â”‚  â† çŠ¶æ€å¡ç‰‡
â”‚  â”‚           å®‰å…¨çŠ¶æ€: æ­£å¸¸ âœ…        â”‚   â”‚
â”‚  â”‚                                   â”‚   â”‚
â”‚  â”‚  [å‘ç•™è¨€]  [æ‰“ç”µè¯]  [æŸ¥çœ‹è¯¦æƒ…]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å¦ˆå¦ˆçš„çŠ¶æ€                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  ç¦»çº¿ Â· ä¸Šæ¬¡æ´»è·ƒ 2å°æ—¶å‰  â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ‘µ  â”‚                         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜  ä»Šæ—¥ç”¨è¯: 1/2          â”‚   â”‚
â”‚  â”‚           å®‰å…¨çŠ¶æ€: æ­£å¸¸ âœ…        â”‚   â”‚
â”‚  â”‚                                   â”‚
â”‚  â”‚  [å‘ç•™è¨€]  [æ‰“ç”µè¯]  [æŸ¥çœ‹è¯¦æƒ…]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€ ä»Šæ—¥åŠ¨æ€ â”€â”€                        â”‚
â”‚                                         â”‚
â”‚  â€¢ 10:30 çˆ¸çˆ¸è¯†åˆ«äº†é™å‹è¯              â”‚
â”‚  â€¢ 09:00 å¦ˆå¦ˆæ’­æ”¾äº†ä½ çš„ç•™è¨€             â”‚
â”‚  â€¢ 08:30 çˆ¸çˆ¸å®Œæˆäº†æ™¨é—´ç”¨è¯             â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 çŠ¶æ€å¡ç‰‡æ•°æ®æ¨¡å‹

```dart
class ElderStatus {
  final String elderId;
  final String name;
  final String avatar;
  final OnlineStatus onlineStatus;  // online/offline/away
  final DateTime lastActiveTime;
  final MedicationStatus todayMedication;
  final SecurityStatus securityStatus;
  final List<ActivityLog> recentActivities;
}

class MedicationStatus {
  final int completed;   // å·²å®Œæˆæ¬¡æ•°
  final int total;       // æ€»æ¬¡æ•°
  final DateTime? nextReminder;  // ä¸‹æ¬¡æé†’æ—¶é—´
}

enum SecurityStatus {
  normal,     // æ­£å¸¸
  warning,    // è­¦å‘Šï¼ˆæœ‰å¾…å¤„ç†äº‹ä»¶ï¼‰
  alert       // ç´§æ€¥ï¼ˆéœ€è¦ç«‹å³å…³æ³¨ï¼‰
}
```

### 3.3 æ¶ˆæ¯æé†’ä¸­å¿ƒ

#### æ¶ˆæ¯ç±»å‹

| ç±»å‹ | ä¼˜å…ˆçº§ | æ¨é€æ–¹å¼ | ç¤ºä¾‹ |
|:----|:------|:--------|:----|
| ç´§æ€¥é¢„è­¦ | P0 | æ¨é€+ç”µè¯ | æ£€æµ‹åˆ°è¯ˆéª—ç”µè¯ |
| å®‰å…¨æé†’ | P1 | æ¨é€+éœ‡åŠ¨ | é•¿æ—¶é—´æœªæ´»è·ƒ |
| ç”¨è¯æé†’ | P2 | æ¨é€ | çˆ¸çˆ¸è¿˜æœªæœç”¨æ—©é—´è¯ |
| äº’åŠ¨æ¶ˆæ¯ | P3 | æ¨é€ | æ”¶åˆ°çˆ¸çˆ¸çš„ç•™è¨€ |
| ç³»ç»Ÿé€šçŸ¥ | P4 | é™é»˜ | è¯†åˆ«è®°å½•å·²æ›´æ–° |

## 4. å¥åº·ç®¡ç†æ¨¡å—

### 4.1 ç”¨è¯ç®¡ç†ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›          ç”¨è¯ç®¡ç†        + æ·»åŠ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”€â”€ çˆ¸çˆ¸çš„ç”¨è¯ â”€â”€                       â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ’Š é™å‹è¯ (ç»œæ´»å–œ)              â”‚   â”‚
â”‚  â”‚  æ¯æ—¥1æ¬¡ Â· æ—©é¤å                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ä»Šæ—¥: âœ… 08:30 å·²æœç”¨        â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  [ç¼–è¾‘]  [æé†’è®¾ç½®]  [åˆ é™¤]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ’Š é™ç³–è¯ (äºŒç”²åŒèƒ)            â”‚   â”‚
â”‚  â”‚  æ¯æ—¥2æ¬¡ Â· æ—©æ™šé¥­å              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ä»Šæ—¥: âœ… æ—© Â· â° æ™š(å¾…æœç”¨)   â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  [ç¼–è¾‘]  [æé†’è®¾ç½®]  [åˆ é™¤]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€ å¦ˆå¦ˆçš„ç”¨è¯ â”€â”€                       â”‚
â”‚  ...                                    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ·»åŠ ç”¨è¯æé†’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›       æ·»åŠ ç”¨è¯æé†’              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  é€‰æ‹©å®¶äºº                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‘´ çˆ¸çˆ¸     ğŸ‘µ å¦ˆå¦ˆ             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  è¯å“åç§°                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç»œæ´»å–œ (æ°¨æ°¯åœ°å¹³ç‰‡)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  æœç”¨é¢‘ç‡                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â—‹ æ¯æ—¥1æ¬¡  â—‹ æ¯æ—¥2æ¬¡  â—‹ æ¯æ—¥3æ¬¡ â”‚   â”‚
â”‚  â”‚  â—‹ éš”æ—¥1æ¬¡  â—‹ æ¯å‘¨1æ¬¡  â—‹ è‡ªå®šä¹‰  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  æé†’æ—¶é—´                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  08:00  æ—©é¤å                    â”‚   â”‚
â”‚  â”‚  [+ æ·»åŠ æé†’æ—¶é—´]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  ç”¨è¯å‰‚é‡                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ¯æ¬¡ 1 ç‰‡                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            ä¿å­˜                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 å¥åº·æ•°æ®æŸ¥çœ‹

```dart
class MedicationRecord {
  final String id;
  final String medicineId;
  final String medicineName;
  final DateTime scheduledTime;
  final DateTime? actualTime;
  final MedicationRecordStatus status;  // taken/missed/pending
  final String? imageUrl;  // è¯å“è¯†åˆ«å›¾ç‰‡
}

class HealthReport {
  final String elderId;
  final DateTime startDate;
  final DateTime endDate;
  final int totalMedications;
  final int completedMedications;
  final double complianceRate;  // ä¾ä»ç‡
  final List<SecurityEvent> securityEvents;
  final List<ActivitySummary> activitySummary;
}
```

## 5. å®‰å…¨é˜²æŠ¤æ¨¡å—

### 5.1 å®‰å…¨ä¸­å¿ƒç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›          å®‰å…¨ä¸­å¿ƒ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ›¡ï¸ æ•´ä½“å®‰å…¨çŠ¶æ€: è‰¯å¥½            â”‚   â”‚
â”‚  â”‚  æœ¬å‘¨æ‹¦æˆª: 3æ¬¡è¯ˆéª—ç”µè¯            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€ æœ€è¿‘äº‹ä»¶ â”€â”€                        â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸš¨ è¯ˆéª—ç”µè¯é¢„è­¦                  â”‚   â”‚
â”‚  â”‚  ä»Šå¤© 10:30 Â· çˆ¸çˆ¸çš„æ‰‹æœº          â”‚   â”‚
â”‚  â”‚  æ¥ç”µ: 138****8888               â”‚   â”‚
â”‚  â”‚  æ ‡è®°: ç–‘ä¼¼è¯ˆéª— (98%ç½®ä¿¡åº¦)       â”‚   â”‚
â”‚  â”‚  å¤„ç†: å·²æé†’ç”¨æˆ·ï¼Œé€šè¯30ç§’åæŒ‚æ–­  â”‚   â”‚  â† é£é™©äº‹ä»¶
â”‚  â”‚  [æŸ¥çœ‹è¯¦æƒ…]                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âš ï¸ æ¨é”€ç”µè¯æé†’                  â”‚   â”‚
â”‚  â”‚  æ˜¨å¤© 15:20 Â· å¦ˆå¦ˆçš„æ‰‹æœº          â”‚   â”‚
â”‚  â”‚  æ¥ç”µ: 010-88888888              â”‚   â”‚
â”‚  â”‚  æ ‡è®°: ä¿é™©æ¨é”€                   â”‚   â”‚
â”‚  â”‚  [æŸ¥çœ‹è¯¦æƒ…]                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€ å®‰å…¨è®¾ç½® â”€â”€                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è‡ªåŠ¨æ‹¦æˆªè¯ˆéª—ç”µè¯      [å¼€å¯]     â”‚   â”‚
â”‚  â”‚  æ¨é”€ç”µè¯æé†’          [å¼€å¯]     â”‚   â”‚
â”‚  â”‚  é™Œç”Ÿå·ç é¢„è­¦          [å…³é—­]     â”‚   â”‚
â”‚  â”‚  ç´§æ€¥è”ç³»äºº            [è®¾ç½® >]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å®‰å…¨äº‹ä»¶æ•°æ®æ¨¡å‹

```dart
class SecurityEvent {
  final String id;
  final String elderId;
  final SecurityEventType type;
  final DateTime time;
  final String description;
  final SecurityEventLevel level;
  final SecurityEventStatus status;
  final Map<String, dynamic> details;
}

enum SecurityEventType {
  scamCall,        // è¯ˆéª—ç”µè¯
  salesCall,       // æ¨é”€ç”µè¯
  unknownCall,     // é™Œç”Ÿæ¥ç”µ
  longInactive,    // é•¿æ—¶é—´ä¸æ´»è·ƒ
  abnormalLocation // å¼‚å¸¸ä½ç½®
}

enum SecurityEventLevel {
  critical,  // ç´§æ€¥
  warning,   // è­¦å‘Š
  info       // æç¤º
}
```

## 6. äº²æƒ…äº’åŠ¨æ¨¡å—

### 6.1 è¯­éŸ³ç•™è¨€ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›          è¯­éŸ³ç•™è¨€               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”€â”€ ç»™çˆ¸çˆ¸çš„ç•™è¨€ â”€â”€                     â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä»Šå¤© 10:30 Â· å·²æ’­æ”¾ âœ“           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  â–¶  0:15                â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ˜¨å¤© 18:00 Â· å·²æ’­æ”¾ âœ“           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  â–¶  0:08                â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€ çˆ¸çˆ¸çš„å›å¤ â”€â”€                       â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä»Šå¤© 11:00 Â· æ–°æ¶ˆæ¯ ğŸ”´          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  â–¶  0:20                â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         ğŸ¤ æŒ‰ä½å½•åˆ¶ç•™è¨€          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  é€‰æ‹©æ¥æ”¶äºº: ğŸ‘´çˆ¸çˆ¸  ğŸ‘µå¦ˆå¦ˆ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å®¶åº­é…ç½®ç®¡ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›          å®¶åº­ç®¡ç†               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”€â”€ å®¶åº­æˆå‘˜ â”€â”€                        â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‘´ çˆ¸çˆ¸                         â”‚   â”‚
â”‚  â”‚  æ‰‹æœº: 138****8888              â”‚   â”‚
â”‚  â”‚  è®¾å¤‡: å·²ç»‘å®š                     â”‚   â”‚
â”‚  â”‚  [ç®¡ç†è”ç³»äºº]  [æé†’è®¾ç½®]  [è§£ç»‘] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‘µ å¦ˆå¦ˆ                         â”‚   â”‚
â”‚  â”‚  æ‰‹æœº: 139****9999              â”‚   â”‚
â”‚  â”‚  è®¾å¤‡: å·²ç»‘å®š                     â”‚   â”‚
â”‚  â”‚  [ç®¡ç†è”ç³»äºº]  [æé†’è®¾ç½®]  [è§£ç»‘] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  + æ·»åŠ å®¶åº­æˆå‘˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€ å…¶ä»–ç®¡ç†å‘˜ â”€â”€                      â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‘¨ å¼Ÿå¼Ÿ                         â”‚   â”‚
â”‚  â”‚  æƒé™: ç®¡ç†å‘˜                     â”‚   â”‚
â”‚  â”‚  [ä¿®æ”¹æƒé™]  [ç§»é™¤]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  + é‚€è¯·å®¶äººåŠ å…¥                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 è”ç³»äººé…ç½®

ä¸ºè€å¹´ç«¯é…ç½®æ˜¾ç¤ºçš„å¸¸ç”¨è”ç³»äººï¼š

```dart
class ElderContact {
  final String id;
  final String elderId;       // æ‰€å±è€äºº
  final String name;          // æ˜¾ç¤ºåç§°
  final String phone;         // ç”µè¯å·ç 
  final String? avatar;       // å¤´åƒ
  final String relation;      // å…³ç³»ï¼ˆå„¿å­/å¥³å„¿/è€ä¼´/åŒ»é™¢ï¼‰
  final bool isEmergency;     // æ˜¯å¦ç´§æ€¥è”ç³»äºº
  final int sortOrder;        // æ’åºé¡ºåº
}
```

## 7. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 7.1 é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ app.dart
â”‚
â”œâ”€â”€ core/                        # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ app_constants.dart
â”‚   â”‚   â””â”€â”€ api_constants.dart
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”œâ”€â”€ app_theme.dart
â”‚   â”‚   â””â”€â”€ app_colors.dart
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ date_utils.dart
â”‚   â”‚   â””â”€â”€ validators.dart
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ loading_widget.dart
â”‚       â””â”€â”€ error_widget.dart
â”‚
â”œâ”€â”€ data/                        # æ•°æ®å±‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.dart
â”‚   â”‚   â”œâ”€â”€ elder.dart
â”‚   â”‚   â”œâ”€â”€ medication.dart
â”‚   â”‚   â”œâ”€â”€ security_event.dart
â”‚   â”‚   â””â”€â”€ voice_message.dart
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ auth_repository.dart
â”‚   â”‚   â”œâ”€â”€ elder_repository.dart
â”‚   â”‚   â”œâ”€â”€ health_repository.dart
â”‚   â”‚   â””â”€â”€ message_repository.dart
â”‚   â”œâ”€â”€ datasources/
â”‚   â”‚   â”œâ”€â”€ remote/
â”‚   â”‚   â”‚   â”œâ”€â”€ api_client.dart
â”‚   â”‚   â”‚   â””â”€â”€ api_service.dart
â”‚   â”‚   â””â”€â”€ local/
â”‚   â”‚       â””â”€â”€ local_storage.dart
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â””â”€â”€ response/
â”‚
â”œâ”€â”€ providers/                   # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”œâ”€â”€ elder_provider.dart
â”‚   â”œâ”€â”€ health_provider.dart
â”‚   â”œâ”€â”€ security_provider.dart
â”‚   â””â”€â”€ message_provider.dart
â”‚
â”œâ”€â”€ pages/                       # é¡µé¢
â”‚   â”œâ”€â”€ splash/
â”‚   â”‚   â””â”€â”€ splash_page.dart
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login_page.dart
â”‚   â”‚   â””â”€â”€ register_page.dart
â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”œâ”€â”€ home_page.dart
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â”œâ”€â”€ elder_status_card.dart
â”‚   â”‚       â””â”€â”€ activity_timeline.dart
â”‚   â”œâ”€â”€ health/
â”‚   â”‚   â”œâ”€â”€ health_page.dart
â”‚   â”‚   â”œâ”€â”€ medication_list_page.dart
â”‚   â”‚   â””â”€â”€ add_medication_page.dart
â”‚   â”œâ”€â”€ security/
â”‚   â”‚   â”œâ”€â”€ security_page.dart
â”‚   â”‚   â””â”€â”€ event_detail_page.dart
â”‚   â”œâ”€â”€ interaction/
â”‚   â”‚   â”œâ”€â”€ interaction_page.dart
â”‚   â”‚   â””â”€â”€ voice_message_page.dart
â”‚   â””â”€â”€ settings/
â”‚       â”œâ”€â”€ settings_page.dart
â”‚       â”œâ”€â”€ family_manage_page.dart
â”‚       â””â”€â”€ contact_config_page.dart
â”‚
â”œâ”€â”€ services/                    # æœåŠ¡
â”‚   â”œâ”€â”€ push_service.dart
â”‚   â”œâ”€â”€ audio_service.dart
â”‚   â””â”€â”€ websocket_service.dart
â”‚
â””â”€â”€ routes/
    â””â”€â”€ app_routes.dart
```

### 7.2 æ ¸å¿ƒä¾èµ–

```yaml
# pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  
  # çŠ¶æ€ç®¡ç†
  flutter_riverpod: ^2.4.10
  
  # ç½‘ç»œè¯·æ±‚
  dio: ^5.4.0
  
  # æœ¬åœ°å­˜å‚¨
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  shared_preferences: ^2.2.2
  
  # è·¯ç”±ç®¡ç†
  go_router: ^13.0.1
  
  # UIç»„ä»¶
  cached_network_image: ^3.3.1
  flutter_svg: ^2.0.9
  shimmer: ^3.0.0
  
  # éŸ³é¢‘å¤„ç†
  just_audio: ^0.9.36
  record: ^5.0.4
  
  # æ¨é€æœåŠ¡
  firebase_messaging: ^14.7.10
  jpush_flutter: ^2.5.1
  
  # WebSocket
  web_socket_channel: ^2.4.0
  
  # å·¥å…·
  intl: ^0.18.1
  permission_handler: ^11.1.0
  url_launcher: ^6.2.2

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.1
  hive_generator: ^2.0.1
  build_runner: ^2.4.8
```

### 7.3 ç½‘ç»œè¯·æ±‚å°è£…

```dart
// lib/data/datasources/remote/api_client.dart
class ApiClient {
  late final Dio _dio;
  
  ApiClient() {
    _dio = Dio(BaseOptions(
      baseUrl: ApiConstants.baseUrl,
      connectTimeout: const Duration(seconds: 10),
      receiveTimeout: const Duration(seconds: 10),
    ));
    
    _dio.interceptors.addAll([
      AuthInterceptor(),
      LogInterceptor(requestBody: true, responseBody: true),
    ]);
  }
  
  Future<T> get<T>(String path, {Map<String, dynamic>? params}) async {
    final response = await _dio.get(path, queryParameters: params);
    return _handleResponse(response);
  }
  
  Future<T> post<T>(String path, {dynamic data}) async {
    final response = await _dio.post(path, data: data);
    return _handleResponse(response);
  }
  
  T _handleResponse<T>(Response response) {
    if (response.data['code'] == 0) {
      return response.data['data'] as T;
    } else {
      throw ApiException(
        code: response.data['code'],
        message: response.data['message'],
      );
    }
  }
}
```

### 7.4 çŠ¶æ€ç®¡ç†ç¤ºä¾‹

```dart
// lib/providers/elder_provider.dart
final elderStatusProvider = StateNotifierProvider<ElderStatusNotifier, AsyncValue<List<ElderStatus>>>((ref) {
  return ElderStatusNotifier(ref.read(elderRepositoryProvider));
});

class ElderStatusNotifier extends StateNotifier<AsyncValue<List<ElderStatus>>> {
  final ElderRepository _repository;
  
  ElderStatusNotifier(this._repository) : super(const AsyncValue.loading()) {
    loadElderStatus();
  }
  
  Future<void> loadElderStatus() async {
    state = const AsyncValue.loading();
    try {
      final statuses = await _repository.getElderStatuses();
      state = AsyncValue.data(statuses);
    } catch (e, st) {
      state = AsyncValue.error(e, st);
    }
  }
  
  Future<void> refreshStatus(String elderId) async {
    try {
      final status = await _repository.getElderStatus(elderId);
      state = state.whenData((list) {
        final index = list.indexWhere((e) => e.elderId == elderId);
        if (index >= 0) {
          list[index] = status;
        }
        return [...list];
      });
    } catch (e) {
      // å¤„ç†é”™è¯¯
    }
  }
}
```

### 7.5 æ¨é€æœåŠ¡é›†æˆ

```dart
// lib/services/push_service.dart
class PushService {
  static final PushService _instance = PushService._internal();
  factory PushService() => _instance;
  PushService._internal();
  
  Future<void> initialize() async {
    // åˆå§‹åŒ–æå…‰æ¨é€
    JPush jpush = JPush();
    jpush.setup(
      appKey: "your_jpush_app_key",
      channel: "developer-default",
      production: false,
    );
    
    // ç›‘å¬æ¨é€æ¶ˆæ¯
    jpush.addEventHandler(
      onReceiveNotification: (Map<String, dynamic> message) async {
        _handleNotification(message);
      },
      onOpenNotification: (Map<String, dynamic> message) async {
        _handleNotificationOpen(message);
      },
    );
    
    // è·å–Registration ID
    String? registrationID = await jpush.getRegistrationID();
    // ä¸ŠæŠ¥è‡³æœåŠ¡å™¨
  }
  
  void _handleNotification(Map<String, dynamic> message) {
    final type = message['extras']['type'];
    switch (type) {
      case 'security_alert':
        // å¤„ç†å®‰å…¨é¢„è­¦
        break;
      case 'medication_reminder':
        // å¤„ç†ç”¨è¯æé†’
        break;
      case 'voice_message':
        // å¤„ç†è¯­éŸ³ç•™è¨€
        break;
    }
  }
}
```

### 7.6 WebSocketå®æ—¶é€šä¿¡

```dart
// lib/services/websocket_service.dart
class WebSocketService {
  WebSocketChannel? _channel;
  final _messageController = StreamController<WSMessage>.broadcast();
  
  Stream<WSMessage> get messageStream => _messageController.stream;
  
  Future<void> connect(String token) async {
    final wsUrl = '${ApiConstants.wsUrl}?token=$token';
    _channel = WebSocketChannel.connect(Uri.parse(wsUrl));
    
    _channel!.stream.listen(
      (data) {
        final message = WSMessage.fromJson(jsonDecode(data));
        _messageController.add(message);
      },
      onError: (error) {
        // é‡è¿é€»è¾‘
        _reconnect(token);
      },
      onDone: () {
        // è¿æ¥å…³é—­
        _reconnect(token);
      },
    );
  }
  
  void send(WSMessage message) {
    _channel?.sink.add(jsonEncode(message.toJson()));
  }
  
  Future<void> _reconnect(String token) async {
    await Future.delayed(const Duration(seconds: 3));
    await connect(token);
  }
  
  void dispose() {
    _channel?.sink.close();
    _messageController.close();
  }
}
```
